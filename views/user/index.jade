extends ../../layouts/default  

block head	
	if result.user.name
		title #{result.user.name} #{result.user.lastname} - compart.io		
		- var name = result.user.name + " " + result.user.lastname		
	else
		title #{result.user.username} - compart.io
		- var name = result.user.username
	
block body
	div.page.user-profile
		div.container
			div.row
				div.col-sm-4 
					if result.user.url_image 
						img.user-image.img-rounded.img-responsive(src="#{result.user.url_image}", alt="#{name} - compart.io")
					else
						img.user-image.img-rounded.img-responsive(src="http://dummyimage.com/250x250/DDD/fff.jpg")

				div.col-sm-7.col-sm-offset-1
					h2.text-uppercase ¡Hola! Soy #{name}
					
					p.about #{result.user.about}		
				
					p 
						| Mi ciudad: 
						a(href="/#{result.city.slug}") #{result.city.name} 			

			div.row
				div.col-sm-6
					h4 Lo que #{name} está ofreciendo ahora mismo
					p id usuario: #{result.user._id}

					if result.donations != null				
						for obj in result.donations
							p 
								a(href="/give/view/#{obj._id}") #{obj.title}
							p #{obj.description}
							p id: #{obj._id}
							p status: #{obj.status}
							p giver_user_id: #{obj.giver_user_id}
							p 
								img.compartio-image(src="#{obj.url_image}", alt="#{obj.title}")
			

				div.col-sm-6 
					h4 Lo que #{name} está pidiendo ahora mismo
					if result.needs != null				
						for obj in result.needs
							p Nombre: #{obj.title}					
							p #{obj.description}
							p id: #{obj._id}
							p status: #{obj.status}
							p receiver_user_id: #{obj.receiver_user_id}

			div.row
				h3 El histórico de #{name}
				div.col-sm-6
					h4 Donaciones
					if result.donations_delivered != null				
						for obj in result.donations_delivered
							p Nombre: #{obj.title}
							p 
								img.compartio-image(src="#{obj.url_image}", alt="#{obj.title}")
							p id: #{obj._id}
							p status: #{obj.status}
							p giver_user_id: #{obj.giver_user_id}						
								img.user-image(src="#{result.user.url_image}", alt="#{result.user.name}")
							p receiver_user_id: #{obj.receiver_user_id._id}
								a(href="/user/#{obj.receiver_user_id._id}")
									img.user-image(src="#{obj.receiver_user_id.url_image}", alt="#{obj.receiver_user_id.name}")




				div.col-sm-6
					h4 Recepciones
					if result.needs_delivered != null				
						for obj in result.needs_delivered
							if obj.giver_user_id.name
								- var giver_user_name = obj.giver_user_id.name + obj.giver_user_id.lastname
							else
								- var giver_user_name = obj.giver_user_id.username 
							p 
								| Hace x días recibió una donación de 
								a(href="/user/#{obj.giver_user_id._id}", title="Ir al perfil de #{giver_user_name} en compart.io") #{giver_user_name}

							p Nombre: #{obj.title}
							p 
								img.compartio-image(src="#{obj.url_image}", alt="#{obj.title}")
							p id: #{obj._id}
							p status: #{obj.status}
							p giver_user_id: #{obj.giver_user_id._id}
							p 
								a(href="/user/#{obj.giver_user_id._id}")
									img.user-image(src="#{obj.giver_user_id.url_image}", alt="#{obj.giver_user_id.name}")
							p receiver_user_id: #{result.user._id}
								img.user-image(src="#{result.user.url_image}", alt="#{result.user.name}")


